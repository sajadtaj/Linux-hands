<div dir='rtl'>

# Kasm

فناوری **Kasm** یا به‌طور دقیق‌تر **Kasm Workspaces** یک پلتفرم مجازی‌سازی و اجرای برنامه‌ها، مرورگرها و دسکتاپ‌ها به‌صورت ایمن و در بستر وب است. این فناوری به کاربران اجازه می‌دهد تا بدون نصب نرم‌افزار یا استفاده مستقیم از سیستم عامل، از طریق مرورگر وب، به محیط‌های کاری مجازی (مانند لینوکس یا ویندوز) و برنامه‌های خاص دسترسی داشته باشند. فرض کنید می‌خواهید از یک مرورگر خاص (مثلاً Firefox با تنظیمات خاص امنیتی) استفاده کنید، اما نمی‌خواهید آن را روی لپ‌تاپ خود نصب کنید یا نمی‌خواهید ردپایی از فعالیت شما باقی بماند.
یا مثلاً می‌خواهید به یک محیط لینوکسی با امنیت بالا دسترسی داشته باشید، اما نه با نصب لینوکس بلکه از طریق مرورگر و بدون دست‌کاری سیستم فعلی‌تان.

**Kasm** این امکان را می‌دهد:

* از یک سیستم عامل یا مرورگر یا برنامه خاص از طریق اینترنت (فقط با یک مرورگر ساده) استفاده کنید.
* همه چیز روی سرور اجرا می‌شود، نه روی سیستم شما.
* هیچ ردپایی روی کامپیوتر شما باقی نمی‌ماند.
* امنیت بالا دارد چون محیط ایزوله شده‌ است.

---

## 🔧 کاربردهای اصلی Kasm:

| کاربرد             | توضیح                                                                                       |
| ------------------ | ------------------------------------------------------------------------------------------- |
| ✅ اجرای مرورگر امن | اجرای مرورگرهایی مثل Chrome یا Firefox روی یک سرور ایزوله برای جلوگیری از آلودگی یا فیشینگ. |
| ✅ محیط تست ایمن    | اجرای برنامه‌ها و کدهای مشکوک در یک محیط مجازی بدون آسیب به سیستم واقعی.                    |
| ✅ دسترسی راه‌دور   | فراهم کردن دسکتاپ لینوکس یا ویندوز برای کاربر فقط با مرورگر از هر جا.                       |
| ✅ DevSecOps        | فراهم کردن محیط توسعه ایزوله برای تیم‌های برنامه‌نویسی با امنیت بالا.                       |
| ✅ آموزش و آزمایش   | ساخت محیط‌های موقت برای آموزش لینوکس، امنیت شبکه، یا ابزارهای DevOps.                       |

---

## 🎯 مزایای اصلی:

| مزیت                            | توضیح                                                                                    |
| ------------------------------- | ---------------------------------------------------------------------------------------- |
| 🔐 امنیت بالا                   | محیط‌ها ایزوله هستند، کاربر نمی‌تواند به سایر بخش‌ها نفوذ کند.                           |
| 🌐 فقط با مرورگر                | نیاز به نصب هیچ نرم‌افزاری نیست. حتی روی گوشی هم می‌توان اجرا کرد.                       |
| ⏱ راه‌اندازی سریع               | فقط با چند کلیک یک محیط مجازی آماده استفاده می‌شود.                                      |
| 🔄 انعطاف بالا                  | می‌توان محیط‌های مختلف (لینوکس، ویندوز، مرورگر، IDE و...) را در قالب container اجرا کرد. |
| 🧹 عدم باقی ماندن ردپا          | پس از پایان کار، محیط پاک می‌شود. مناسب برای فعالیت‌های حساس یا آزمایشی.                 |
| 💻 مناسب برای آموزش             | دانشجویان می‌توانند بدون نصب چیزی، فقط با مرورگر، تمرین کنند.                            |
| ☁️ سازگاری با Docker/Kubernetes | قابل استفاده در زیرساخت‌های ابری یا در کنار سیستم‌های موجود.                             |

---

## 📦 تکنولوژی‌های پایه‌ای:

* معماری مبتنی بر **Container** (مثل Docker)
* مدیریت منابع با Kubernetes (در مقیاس بزرگ)
* قابلیت احراز هویت و دسترسی
* پشتیبانی از پروتکل‌های تصویری مانند VNC، RDP و... از طریق مرورگر

حتماً سجاد. در اینجا آموزش **کامل و قدم‌به‌قدم راه‌اندازی Kasm Workspaces** روی یک سرور لینوکس (مثلاً Ubuntu 20.04/22.04) را ارائه می‌دهم. این راهنما شامل:

* نیازمندی‌ها
* نصب
* ساختار فایل‌ها
* پیکربندی
* دسترسی کاربران
* نکات امنیتی
* نحوه اتصال از طریق مرورگر

---

## 🧰 پیش‌نیازها

| مورد           | مقدار                                                                   |
| -------------- | ----------------------------------------------------------------------- |
| سیستم‌عامل     | Ubuntu 20.04 یا بالاتر                                                  |
| دسترسی         | دسترسی root یا sudo                                                     |
| منابع پیشنهادی | 4+ CPU، 8+ GB RAM، 30+ GB فضای دیسک                                     |
| پورت‌های باز   | `443` (HTTPS)، `8443` (برای اتصال تصویری)، `22` (برای SSH)، `80` (HTTP) |
| اینترنت        | برای دانلود imageها                                                     |

---

## ۱. نصب Docker (اگر نصب نیست)

```bash
sudo apt update
sudo apt install -y curl git docker.io docker-compose
sudo systemctl enable docker
sudo systemctl start docker
```

---

## ۲. دریافت و نصب Kasm

```bash
curl -O https://kasm-static-content.s3.amazonaws.com/kasm_release_1.15.0.01d.tar.gz
tar -xvzf kasm_release_1.15.0.01d.tar.gz
cd kasm_release
sudo ./install.sh
```

✅ در حین نصب، اطلاعات ادمین (ایمیل و پسورد) به شما نمایش داده می‌شود. آن را ذخیره کنید.

---

## ۳. ساختار فایل‌ها بعد از نصب

```bash
/opt/kasm/
├── bin/                # اسکریپت‌های راه‌اندازی و مدیریت
├── current/            # نسخه فعال
├── logs/               # لاگ‌های اجرا و خطاها
├── nginx/              # تنظیمات nginx داخلی
├── docker/             # فایل‌های مربوط به Docker
└── conf/               # فایل‌های پیکربندی YAML و JSON
```

---

## ۴. ورود به پنل Kasm

پس از نصب، مرورگر را باز کن و برو به:

```
https://<YOUR_SERVER_IP>/
```

* یوزرنیم: admin
* پسورد: همان که در مرحله نصب گفته شد

---

## ۵. ساخت Workspace (محیط اجرا)

در پنل Admin:

1. وارد بخش `Images > Workspace Images` شوید

2. روی `Pull Image` کلیک کنید

3. یکی از موارد زیر را انتخاب کنید:

   | نام              | توضیح                    |
   | ---------------- | ------------------------ |
   | `Firefox`        | مرورگر ایمن برای وب‌گردی |
   | `Ubuntu Desktop` | دسکتاپ کامل لینوکس       |
   | `VSCode`         | ویرایشگر کد از طریق وب   |

4. پس از دانلود، به کاربران اختصاص بده

---

## ۶. ساخت و مدیریت کاربران

### ساخت کاربر جدید:

1. منوی Admin → Users
2. گزینه `Create New User`
3. تعیین:

   * Username
   * Password
   * Roles: Admin / User
   * Workspace Access

---

## ۷. تنظیمات امنیتی اولیه (DevOps View)

### محدودسازی IP:

در مسیر زیر:

```bash
/opt/kasm/current/conf/nginx/conf.d/default.conf
```

می‌توان با دستورات `allow` و `deny` فقط IPهای خاص را مجاز کرد.

### فعال‌سازی SSL سفارشی:

اگر دامنه داری، می‌توان از Let’s Encrypt استفاده کرد یا فایل‌های `.crt` و `.key` را جایگزین فایل‌های:

```
/opt/kasm/current/certs/kasm_ssl.crt
/opt/kasm/current/certs/kasm_ssl.key
```

---

## ۸. مدیریت از طریق CLI

برخی دستورات مفید:

```bash
# ریست پسورد admin
sudo /opt/kasm/bin/reset_admin_password <new_pass>

# ریستارت Kasm
sudo /opt/kasm/bin/stop
sudo /opt/kasm/bin/start

# بررسی وضعیت
sudo docker ps
```

---

## ۹. بکاپ و بازیابی

بکاپ گیری از مسیر کامل:

```
/opt/kasm/
```

و گرفتن خروجی از دیتابیس داخلی (اگر فعال باشد). برای بازیابی فقط کافی‌ست این مسیر را به سرور جدید منتقل و اسکریپت `install.sh` را دوباره اجرا کنید تا مسیر‌ها برقرار شود.

---

## ۱۰. نکات پیشرفته (در پروژه‌های واقعی)

| موضوع                 | توضیح                                      |
| --------------------- | ------------------------------------------ |
| اتصال به LDAP/SSO     | برای احراز هویت سازمانی                    |
| جداسازی شبکه          | استفاده از Docker network برای امنیت بیشتر |
| لاگ‌گیری مرکزی        | ارسال لاگ‌ها به ELK یا Graylog             |
| زمان‌بندی حذف Session | محدودسازی session کاربران بعد از X دقیقه   |

---

## ✅ خلاصه

| بخش                      | وضعیت |
| ------------------------ | ----- |
| نصب Docker               | ✅     |
| نصب Kasm                 | ✅     |
| ورود به پنل              | ✅     |
| ساخت workspace           | ✅     |
| اضافه کردن کاربر         | ✅     |
| تنظیمات امنیتی اولیه     | ✅     |
| ساختار پوشه و مدیریت CLI | ✅     |

---

