# ูุฏู
ุงู ูุณุชูุฏ ุขููุฒุด ุดูุง ุฑุง ุจุง ุฑูุด ุงุฌุงุฏ Backup ุงุฒ ุณุณุชูโุนุงูู ูููฺฉุณ ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ `rsync` ุขุดูุง ูโฺฉูุฏ. rsync ฺฉ ุงุจุฒุงุฑ ูุฏุฑุชููุฏ ุจุฑุง ููฺฏุงูโุณุงุฒ ู ุงุฌุงุฏ ูุณุฎูโูุง ูพุดุชุจุงู ุงุณุช ฺฉู ูุฒุงุง ูุงููุฏ:
- ุงูุชูุงู ุงูุฒุงุด (ููุท ูุงูโูุง ุชุบุฑ ฺฉุฑุฏู)
- ุญูุธ ูุฌูุฒูุง ู ูฺฺฏโูุง ูุงู
- ุงูฺฉุงู ูุดุฑุฏูโุณุงุฒ ุฏุงุฏูโูุง
- ุงูฺฉุงู ฺฉุงุฑ ุงุฒ ุฑุงู ุฏูุฑ (ุงุฒ ุทุฑู SSH)

## ุงูุฏุงูุงุช ุงููู
1. **ูุตุจ rsync** (ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏ):
   ```bash
   # ุจุฑุง ุณุณุชูโูุง ูุจุชู ุจุฑ Debian/Ubuntu
   sudo apt install rsync

   # ุจุฑุง ุณุณุชูโูุง ูุจุชู ุจุฑ RHEL/CentOS
   sudo yum install rsync
   ```

2. **ุชุนู ูุถุง ุฐุฎุฑูโุณุงุฒ Backup**:
   - ฺฉ ุฏุฑุงู ุงฺฉุณุชุฑูุงู
   - ฺฉ ูพุงุฑุชุดู ุฌุฏุงฺฏุงูู
   - ูุถุง ุฐุฎุฑูโุณุงุฒ ุดุจฺฉู ุง ุณุฑูุฑ ุฑุงูโุฏูุฑ

3. **ุงุฌุงุฏ ุณุงุฎุชุงุฑ ุฏุงุฑฺฉุชูุฑ ุจุฑุง Backup**:
   ```bash
   mkdir -p /backup/system
   ```
# ูุณุฑ ู ูุญู ุฐุฎุฑู ุณุงุฒ
ุจุฑุง ุงูุชู **ูุถุงูุง ุฐุฎุฑูโุณุงุฒ ููุงุณุจ** ุฌูุช ุงูุชูุงู ุจฺฉโุขูพ ุฏุฑ ููพโุชุงูพ ุดุฎุตโุชุงูุ ุจุงุฏ ุฏุณฺฉโูุง ู ูพุงุฑุชุดูโูุง **ูุงุจู ุฏุณุชุฑุณ** ู **ุฏุงุฑุง ูุถุง ุฎุงู ฺฉุงู** ุฑุง ุดูุงุณุง ฺฉูุฏ.  

---

## **ฑ. ูุณุช ุชูุงู ุฏุณฺฉโูุง ู ูพุงุฑุชุดูโูุง ููุฌูุฏ**
ุงุจุชุฏุง ุฏุณฺฉโูุง ูุชุตู ุจู ุณุณุชู ุฑุง ุจุฑุฑุณ ฺฉูุฏ:

### **ุฏุณุชูุฑ `lsblk` (ููุงุด ุฏุฑุฎุช ุฏุณฺฉโูุง ู ูพุงุฑุชุดูโูุง)**
```bash
lsblk -o NAME,FSTYPE,SIZE,MOUNTPOINT,LABEL
```
**ูุซุงู ุฎุฑูุฌ:**
```
NAME        FSTYPE   SIZE MOUNTPOINT  LABEL
nvme0n1            476.9G            
โโnvme0n1p1 vfat     512M /boot/efi   EFI
โโnvme0n1p2 ext4    475.5G /          root
โโnvme0n1p3 swap     976M [SWAP]      
sda               931.5G            
โโsda1      ext4    931.5G /mnt/backup mybackup
```
**ูฺฉุงุช ููู:**
- **ุฏุณฺฉโูุง ุจุฏูู `MOUNTPOINT`** ูููุฒ ูููุช ูุดุฏูโุงูุฏ ู ุจุงุฏ ุงุจุชุฏุง ูููุช ุดููุฏ.
- **ุฏุณฺฉโูุง ุจุง `MOUNTPOINT`** (ูุซู `/`, `/boot/efi`, `/mnt/backup`) ุฏุฑ ุญุงู ุงุณุชูุงุฏู ูุณุชูุฏ.
- **`FSTYPE`** ูุดุงูโุฏููุฏู ููุน ูุงูโุณุณุชู (`ext4`, `ntfs`, `vfat` ู ...).

---

## **ฒ. ุจุฑุฑุณ ูุถุง ุฎุงู ุฏุณฺฉโูุง ูููุชโุดุฏู**
ุจุฑุง ุฏุฏู **ูุถุง ุฎุงู** ุฏุณฺฉโูุง ูููุชโุดุฏู:

### **ุฏุณุชูุฑ `df` (ููุงุด ูุถุง ุฏุณฺฉ)**
```bash
df -h
```
**ูุซุงู ุฎุฑูุฌ:**
```
Filesystem      Size  Used Avail Use% Mounted on
/dev/nvme0n1p2  467G  200G  244G  46% /
/dev/sda1       916G  100G  770G  12% /mnt/backup
```
**ุชุญูู:**
- **`/`** (ูพุงุฑุชุดู ุงุตู ุณุณุชู): **244GB** ูุถุง ุฎุงู ุฏุงุฑุฏ.
- **`/mnt/backup`** (ุฏุณฺฉ ุงฺฉุณุชุฑูุงู ุง ุฏูู): **770GB** ูุถุง ุฎุงู ุฏุงุฑุฏ โ **ููุงุณุจ ุจุฑุง ุจฺฉโุขูพ**.

---

## **ณ. ุงูุชู ุฏุณฺฉโูุง ุงฺฉุณุชุฑูุงู (USB/HDD)**
ุงฺฏุฑ ุงุฒ **ุฏุณฺฉ ุงฺฉุณุชุฑูุงู** (ูุซู ููุด ุง HDD) ุงุณุชูุงุฏู ูโฺฉูุฏุ ูุนูููุงู ุฏุฑ `/media/username/` ุง `/mnt/` ูููุช ูโุดููุฏ.

### **ุฑูุด ฑ: ุจุฑุฑุณ `/media` ู `/mnt`**
```bash
ls /media/$USER/
ls /mnt/
```

### **ุฑูุด ฒ: ุงุณุชูุงุฏู ุงุฒ `udisksctl` (ุจุฑุง ุฏุณฺฉโูุง USB)**
```bash
udisksctl status
```

---

## **ด. ูููุช ฺฉุฑุฏู ุฏุณฺฉโูุง ุฌุฏุฏ (ุงฺฏุฑ ูููุช ูุดุฏูโุงูุฏ)**
ุงฺฏุฑ ุฏุณฺฉ ุฏุงุฑุฏ ฺฉู **ูููุช ูุดุฏู** (ูุซูุงู `/dev/sdb1`)ุ ุงุจุชุฏุง ุจุงุฏ ุขู ุฑุง ูููุช ฺฉูุฏ:

### **ฑ. ุงุฌุงุฏ ูพูุดู ูููุช (ูุซูุงู `/mnt/backup`)**
```bash
sudo mkdir -p /mnt/backup
```

### **ฒ. ูููุช ฺฉุฑุฏู ูพุงุฑุชุดู**
```bash
sudo mount /dev/sdb1 /mnt/backup
```

### **ณ. ุจุฑุฑุณ ููููุชโุขูุฒ ุจูุฏู ูููุช**
```bash
df -h | grep /mnt/backup
```

### **ด. ุจุฑุฑุณ ูุถุง ุฎุงู**

```bash
df -h /mnt/backup
```

---

## **ต. ุจูุชุฑู ฺฏุฒููโูุง ุจุฑุง ุจฺฉโุขูพ**
| ูุญู ุจฺฉโุขูพ | ูุฒุงุง | ูุนุงุจ |
|-----------|-------|-------|
| **ูพุงุฑุชุดู ุฏูู ุฑู HDD/SSD ุฏุงุฎู** (`/mnt/backup`) | ุณุฑุนุช ุจุงูุงุ ููุดู ูุชุตู | ุงฺฏุฑ ุณุณุชู ุขุณุจ ุจุจูุฏุ ุจฺฉโุขูพ ูู ุงุฒ ุจู ูโุฑูุฏ |
| **ุฏุณฺฉ ุงฺฉุณุชุฑูุงู (USB/HDD)** (`/media/user/external`) | ุงููโุชุฑุ ูุงุจู ุญูู | ูุงุฒ ุจู ุงุชุตุงู ุฏุณุช |
| **ุณุฑูุฑ ุฑุงูโุฏูุฑ (NFS/Samba/SSH)** | ุงููุช ุจุงูุงุ ุฏุณุชุฑุณ ุงุฒ ุฑุงู ุฏูุฑ | ูุงุฒ ุจู ุงูุชุฑูุช/ุดุจฺฉู |
| **ุณุฑูุณโูุง ุงุจุฑ (Nextcloud, Dropbox)** | ุฏุณุชุฑุณ ุงุฒ ูุฑุฌุง | ูุงุฒ ุจู ูุถุง ุฎุฑุฏุงุฑ ุดุฏู |


---

### **ุฌูุนโุจูุฏ:**
โ **ูุถุงูุง ููุงุณุจ ุจุฑุง ุจฺฉโุขูพ:**  
1. **ุฏุณฺฉ ุฏูู ุฏุงุฎู** (ุงฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ)  
2. **ุฏุณฺฉ ุงฺฉุณุชุฑูุงู (USB/HDD)**  
3. **ูุถุง ุดุจฺฉู (NAS/ุณุฑูุฑ)**  

โ **ฺฺฉโูุณุช ูุจู ุงุฒ ุจฺฉโุขูพ:**  
โ ูุถุง ุฎุงู ฺฉุงู (`df -h`)  
โ ุฏุณฺฉ ูููุชโุดุฏู (`mount | grep /mnt/backup`)  
โ ุฏุณุชุฑุณ ููุดุชู (`touch /mnt/backup/testfile && rm /mnt/backup/testfile`)  


# ุฏุณุชูุฑุงุช ุงุตู rsync

### ุณุงุฎุชุงุฑ ฺฉู ุฏุณุชูุฑ:
```bash
rsync [options] source destination
```

### ูุซุงูโูุง ฺฉุงุฑุจุฑุฏ:
1. **Backup ุงููู**:
   ```bash
   rsync -aAXv --exclude={"/dev/*","/proc/*","/sys/*","/tmp/*","/run/*","/mnt/*","/media/*","/lost+found"} / /backup/system
   ```

2. **Backup ุงูุฒุงุด** (ููุท ูุงูโูุง ุชุบุฑ ฺฉุฑุฏู):
   ```bash
   rsync -aAXv --delete --exclude={"/dev/*","/proc/*","/sys/*","/tmp/*","/run/*","/mnt/*","/media/*","/lost+found"} / /backup/system
   ```

3. **Backup ุงุฒ ุฑุงู ุฏูุฑ** (ุงุฒ ุทุฑู SSH):
   ```bash
   rsync -aAXvz -e ssh --exclude={"/dev/*","/proc/*","/sys/*","/tmp/*","/run/*","/mnt/*","/media/*","/lost+found"} / user@remote_host:/backup/system
   ```

## ูพุงุฑุงูุชุฑูุง ููู rsync

| ูพุงุฑุงูุชุฑ | ุชูุถุญ |
|---------|-------|
| `-a`    | ุญุงูุช ุขุฑุดู (ุญูุธ ูุฌูุฒูุงุ ูุงูฺฉุชุ timestampูุง) |
| `-A`    | ุญูุธ ACLูุง |
| `-X`    | ุญูุธ extended attributes |
| `-v`    | ููุงุด ุฌุฒุฆุงุช ุนููุงุช (verbose) |
| `-z`    | ูุดุฑุฏูโุณุงุฒ ุฏุงุฏูโูุง ููฺฏุงู ุงูุชูุงู |
| `-P`    | ููุงุด ูพุดุฑูุช ู ุงุฏุงูู ุงูุชูุงู ูุงุชูุงู |
| `--delete` | ุญุฐู ูุงูโูุง ุฏุฑ ููุตุฏ ฺฉู ุฏุฑ ูุจุฏุง ูุฌูุฏ ูุฏุงุฑูุฏ |
| `--exclude` | ุญุฐู ูุงูโูุง/ุฏุงุฑฺฉุชูุฑโูุง ูุดุฎุต |
| `--exclude-from` | ุฎูุงูุฏู ูุณุช exclude ุงุฒ ูุงู |
| `-e ssh` | ุงุณุชูุงุฏู ุงุฒ SSH ุจุฑุง ุงูุชูุงู ุงูู |
| `--link-dest` | ุงุณุชูุงุฏู ุงุฒ hardlink ุจุฑุง ูุงูโูุง ุชุบุฑ ูฺฉุฑุฏู |

## ูุจุฏุง ู ููุตุฏ

### ูุจุฏุง (Source):
- `/` - ฺฉู ุณุณุชู (ุจุง exclude ฺฉุฑุฏู ุฏุงุฑฺฉุชูุฑโูุง ุบุฑุถุฑูุฑ)
- `/home` - ููุท ุฏุงุฑฺฉุชูุฑ home ฺฉุงุฑุจุฑุงู
- `/etc` - ููุท ูุงูโูุง ูพฺฉุฑุจูุฏ ุณุณุชู

### ููุตุฏ (Destination):
- `/backup/system` - ุฏุงุฑฺฉุชูุฑ ูุญู
- `/mnt/backup_drive` - ุฏุฑุงู ุงฺฉุณุชุฑูุงู
- `user@remote_host:/backup` - ุณุฑูุฑ ุฑุงูโุฏูุฑ
- `/media/backup` - ูพุงุฑุชุดู ุฌุฏุงฺฏุงูู

## ูุงูโูุง ููู ุจุฑุง Backup

1. **ูุงูโูุง ูพฺฉุฑุจูุฏ**:
   - `/etc/` (ุชูุงู ูุงูโูุง ูพฺฉุฑุจูุฏ ุณุณุชู)
   - `/home/*/.config/` (ุชูุธูุงุช ฺฉุงุฑุจุฑ)

2. **ุฏุงุฏูโูุง ฺฉุงุฑุจุฑ**:
   - `/home/` (ุชูุงู ุฏุงุฑฺฉุชูุฑโูุง ฺฉุงุฑุจุฑุงู)
   - `/var/www/` (ุฏุฑ ุตูุฑุช ูุฌูุฏ ูุจ ุณุฑูุฑ)

3. **ูพุงฺฏุงูโูุง ุฏุงุฏู**:
   - `/var/lib/mysql/` (ุจุฑุง MySQL)
   - `/var/lib/postgresql/` (ุจุฑุง PostgreSQL)

4. **ูุงฺฏโูุง ุณุณุชู** (ุงุฎุชุงุฑ):
   - `/var/log/`

## ูุงูโูุง ฺฉู ูุงุฒ ุจู Backup ูุฏุงุฑูุฏ

1. **ุฏุงุฑฺฉุชูุฑโูุง ุณุณุชู ูููุช**:
   - `/dev/`
   - `/proc/`
   - `/sys/`
   - `/tmp/`
   - `/run/`
   - `/mnt/`
   - `/media/`
   - `/lost+found/`

2. **ูุงูโูุง ุญุฌู ุบุฑุถุฑูุฑ**:
   - ูุงูโูุง cache (`/var/cache/`)
   - ูุงูโูุง ุฏุงูููุฏ ุดุฏู
   - ูุงูโูุง ูููุช ูุฑูุฑฺฏุฑูุง

3. **ุณุณุชูโูุงูโูุง ูุฌุงุฒ**:
   - `/swapfile`
   - ูุงูโูุง ุตูุญูโุจูุฏ (swap)

## ูฺฉุงุช ููู ุจุฑุง Backup ุจุง rsync

1. **ููุดู ูุจู ุงุฒ ุงุฌุฑุง ุฏุณุชูุฑ ุจุง `--dry-run` ุชุณุช ฺฉูุฏ**:
   ```bash
   rsync -aAXv --dry-run --exclude=... / /backup/system
   ```

2. **ุงุฒ `--delete` ุจุง ุงุญุชุงุท ุงุณุชูุงุฏู ฺฉูุฏ** ุฒุฑุง ูุงูโูุง ุงุถุงู ุฏุฑ ููุตุฏ ุฑุง ุญุฐู ูโฺฉูุฏ.

3. **ุจุฑุง Backupูุง ุฏูุฑูโุง ุงุฒ cron ุงุณุชูุงุฏู ฺฉูุฏ**:
   ```bash
   # ูุฑุงุด crontab
   crontab -e

   # ุงุถุงูู ฺฉุฑุฏู ุฎุท ุฒุฑ ุจุฑุง Backup ุฑูุฒุงูู ุฏุฑ ุณุงุนุช 2 ุดุจ
   0 2 * * * /usr/bin/rsync -aAX --delete --exclude={...} / /backup/system
   ```

4. **ุญูุธ ฺูุฏู ูุณุฎู Backup**:
   - ุงุฒ ุงุณฺฉุฑูพุชโูุง ุจุง `--link-dest` ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ูุณุฎูโูุง ูุฎุชูู Backup ุจุง ุญุฏุงูู ูุถุง ุงุถุงู ุญูุธ ุดููุฏ.

5. **ุจุฑุฑุณ ฺฉูพุงุฑฺฺฏ Backup**:
   - ูพุณ ุงุฒ ุงุชูุงู Backupุ ุณุณุชู ูุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ:
   ```bash
   touch /backup/system/backup_completed
   ```

6. **ุฑูุฒูฺฏุงุฑ Backupูุง ุญุณุงุณ**:
   - ุจุฑุง Backupูุง ุฎุงุฑุฌุ ุงุฒ LUKS ุง ุงุจุฒุงุฑูุง ุฑูุฒูฺฏุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ.

7. **ูุณุชูุฏุณุงุฒ**:
   - ูุณุช ุฏูู ูุงูโูุง exclude ุดุฏู ุฑุง ุฏุฑ ฺฉ ูุงู ูุชู ุฐุฎุฑู ฺฉูุฏ.
   - ุชุงุฑุฎ ู ุฌุฒุฆุงุช ูุฑ Backup ุฑุง ุซุจุช ฺฉูุฏ.

## ุงุณฺฉุฑูพุช ููููู ุจุฑุง Backup ฺฉุงูู ุณุณุชู

```bash
#!/bin/bash

# ุชูุธูุงุช
BACKUP_DIR="/backup/system"
EXCLUDE_LIST=(
  "/dev/*"
  "/proc/*"
  "/sys/*"
  "/tmp/*"
  "/run/*"
  "/mnt/*"
  "/media/*"
  "/lost+found"
  "/home/*/.cache/*"
  "/var/cache/*"
  "*.tmp"
)

# ุงุฌุงุฏ ุฏุงุฑฺฉุชูุฑ Backup ุฏุฑ ุตูุฑุช ุนุฏู ูุฌูุฏ
mkdir -p "$BACKUP_DIR"

# ุณุงุฎุช ุฏุณุชูุฑ rsync
RSYNC_CMD="rsync -aAXv --delete"

# ุงุถุงูู ฺฉุฑุฏู excludeูุง
for item in "${EXCLUDE_LIST[@]}"; do
  RSYNC_CMD+=" --exclude=\"$item\""
done

# ุงุถุงูู ฺฉุฑุฏู ูุจุฏุง ู ููุตุฏ
RSYNC_CMD+=" / $BACKUP_DIR"

# ุงุฌุฑุง ุฏุณุชูุฑ
echo "Running: $RSYNC_CMD"
eval $RSYNC_CMD

# ุจุฑุฑุณ ูุชุฌู
if [ $? -eq 0 ]; then
  echo "Backup completed successfully on $(date)" >> "$BACKUP_DIR/backup.log"
else
  echo "Backup failed on $(date)" >> "$BACKUP_DIR/backup.log"
fi
```

## ุจุงุฒุงุจ Backup

ุจุฑุง ุจุงุฒุงุจ Backup ุงุฌุงุฏ ุดุฏู ุจุง rsyncุ ูโุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ ูุนฺฉูุณ ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
rsync -aAXv /backup/system/ /
```

**ูุดุฏุงุฑ**: ุจุงุฒุงุจ ุจุงุฏ ุฏุฑ ูุญุท Rescue ุง ุจุง ุณุณุชู ุฏุฑ ุญุงูุช Single-User ุงูุฌุงู ุดูุฏ.


# **ูุญุฏูุฏุชโูุง ุจุฑุง ูุฑูุชโูุง ูุฎุชูู ูุงูโุณุณุชู**

ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ `rsync` ุจุฑุง ุจฺฉโุขูพุ ุจุงุฏ ูุญุฏูุฏุชโูุง ูุงูโุณุณุชูโูุง ูุฎุชูู ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ ุชุง ุงุฒ ูุดฺฉูุงุช ุงุญุชูุงู ุฌููฺฏุฑ ฺฉูุฏ. ุฏุฑ ุงู ุจุฎุดุ ูููโุชุฑู ูุญุฏูุฏุชโูุง ู ุฑุงูฺฉุงุฑูุง ุขููุง ุฑุง ุจุฑุฑุณ ูโฺฉูู.

---

## **ฑ. ูุญุฏูุฏุชโูุง NTFS (ููุฏูุฒ / ุฏุณฺฉโูุง ุงฺฉุณุชุฑูุงู)**
NTFS ฺฉ ูุงูโุณุณุชู ูุฎุตูุต ููุฏูุฒ ุงุณุช ฺฉู ุฏุฑ ูููฺฉุณ ุงุฒ ุทุฑู `ntfs-3g` ูพุดุชุจุงู ูโุดูุฏุ ุงูุง ูุญุฏูุฏุชโูุง ุฏุงุฑุฏ:

### **ูุดฺฉูุงุช ุฑุงุฌ:**
| ูุดฺฉู | ุชูุถุญ | ุฑุงูฺฉุงุฑ |
|------|-------|--------|
| **ุนุฏู ูพุดุชุจุงู ฺฉุงูู ุงุฒ ูุฌูุฒูุง ูููฺฉุณ (Permissions)** | NTFS ุจูโุทูุฑ ูพุดโูุฑุถ ุงุฒ ูุงูฺฉุช (`chown`) ู ูุฌูุฒูุง ููฺฉุณ (`chmod`) ูพุดุชุจุงู ููโฺฉูุฏ. | ุงุณุชูุงุฏู ุงุฒ `--no-perms --no-owner` ุฏุฑ rsync |
| **ูุดฺฉู ุจุง Extended Attributes (xattrs)** | NTFS ูฺฺฏโูุง ุชูุณุนูโุงูุชู (`xattrs`) ุฑุง ุจูโุฏุฑุณุช ุฐุฎุฑู ููโฺฉูุฏ. | ุญุฐู ฺฏุฒูู `-X` ุงุฒ rsync |
| **ูุญุฏูุฏุช ุฏุฑ ูุงู ูุงูโูุง** | NTFS ุจุฑุฎ ฺฉุงุฑุงฺฉุชุฑูุง ุฎุงุต (`* ? < > : \ |`) ุฑุง ุฏุฑ ูุงู ูุงูโูุง ููโูพุฐุฑุฏ. | ุจุฑุฑุณ ูุงู ูุงูโูุง ูุจู ุงุฒ ุงูุชูุงู |
| **ูุดฺฉู ุจุง Symbolic Links** | ููฺฉโูุง ููุงุฏู (`symlinks`) ููฺฉู ุงุณุช ุจูโุฏุฑุณุช ฺฉุงุฑ ูฺฉููุฏ. | ุงุณุชูุงุฏู ุงุฒ `--copy-links` ุจุฑุง ฺฉูพ ฺฉุฑุฏู ูุญุชูุง ุจู ุฌุง ููฺฉโูุง |

### **ุฏุณุชูุฑ rsync ุงูู ุจุฑุง NTFS:**
```bash
rsync -rtvz --progress --no-perms --no-owner --modify-window=1 \
"/home/sajad/All Project/" "/mnt/backup/All_Project_Backup/"
```
- `-r` (recursive) ุจู ุฌุง `-a` (ุจู ุฏูู ูุดฺฉูุงุช permissions)
- `--modify-window=1` (ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุดฺฉูุงุช timestamp ุฏุฑ NTFS)

---

## **ฒ. ูุญุฏูุฏุชโูุง FAT32/exFAT (ุฏุณฺฉโูุง USB ูุฏู)**
FAT32 ู exFAT ูุนูููุงู ุฏุฑ ููุดโุฏุฑุงููุง ู ุฏุณฺฉโูุง ุงฺฉุณุชุฑูุงู ุงุณุชูุงุฏู ูโุดููุฏุ ุงูุง ูุญุฏูุฏุชโูุง ุฌุฏ ุฏุงุฑูุฏ:

### **ูุดฺฉูุงุช ุฑุงุฌ:**
| ูุดฺฉู | ุชูุถุญ | ุฑุงูฺฉุงุฑ |
|------|-------|--------|
| **ุญุฏุงฺฉุซุฑ ุญุฌู ูุงู: ดGB (FAT32)** | FAT32 ููโุชูุงูุฏ ูุงูโูุง ุจุฒุฑฺฏุชุฑ ุงุฒ ดGB ุฑุง ุฐุฎุฑู ฺฉูุฏ. | ุงุณุชูุงุฏู ุงุฒ exFAT ุง NTFS |
| **ุนุฏู ูพุดุชุจุงู ุงุฒ ูุฌูุฒูุง** | ูฺฺฏููู ุงุทูุงุนุงุช ูุงูฺฉุช ุง permissions ุฐุฎุฑู ููโุดูุฏ. | ุงุณุชูุงุฏู ุงุฒ `--no-perms --no-owner` |
| **ูุดฺฉู ุจุง ูุงู ูุงูโูุง ุจููุฏ** | ูุงู ูุงูโูุง ูุจุงุฏ ุจุด ุงุฒ ฒตต ฺฉุงุฑุงฺฉุชุฑ ุจุงุดุฏ. | ฺฉูุชุงู ฺฉุฑุฏู ูุงู ูุงูโูุง ุจููุฏ |
| **ุญุณุงุณุช ุจู ุญุฑูู ุจุฒุฑฺฏ/ฺฉูฺฺฉ** | FAT32 ูุนูููุงู ุจู ุญุฑูู ุญุณุงุณ ูุณุช (`file.txt` ู `FILE.TXT` ฺฉุณุงู ูุณุชูุฏ). | ุงุทููุงู ุงุฒ ุนุฏู ุชุฏุงุฎู ูุงู ูุงูโูุง |

### **ุฏุณุชูุฑ rsync ุงูู ุจุฑุง FAT32/exFAT:**
```bash
rsync -rtv --progress --no-perms --no-owner --modify-window=1 \
--max-size=4G "/home/sajad/All Project/" "/mnt/backup/All_Project_Backup/"
```
- `--max-size=4G` (ุจุฑุง FAT32ุ ุฌููฺฏุฑ ุงุฒ ฺฉูพ ูุงูโูุง ุจุฒุฑฺฏุชุฑ ุงุฒ ดGB)

---

## **ณ. ูุญุฏูุฏุชโูุง ext4/btrfs (ูููฺฉุณ)**
ูุงูโุณุณุชูโูุง ูููฺฉุณ ูุงููุฏ `ext4` ู `btrfs` ุงุฒ ุชูุงู ูฺฺฏโูุง rsync ูพุดุชุจุงู ูโฺฉููุฏุ ุงูุง ุจุงุฏ ุจู ฺูุฏ ูฺฉุชู ุชูุฌู ฺฉุฑุฏ:

### **ูุดฺฉูุงุช ุฑุงุฌ:**
| ูุดฺฉู | ุชูุถุญ | ุฑุงูฺฉุงุฑ |
|------|-------|--------|
| **ูุตุฑู ูุถุง ุฒุงุฏ ุจุฑุง metadata** | ูฺฺฏโูุง ูุงููุฏ ACLูุง ู xattrs ูุถุง ุงุถุงู ูุตุฑู ูโฺฉููุฏ. | ุฏุฑ ุตูุฑุช ฺฉูุจูุฏ ูุถุงุ ุงุฒ `-AX` ุตุฑูโูุธุฑ ฺฉูุฏ. |
| **ูุดฺฉู ุจุง ูุงูโูุง ุจุงุฒ (ูุซูุงู ูพุงฺฏุงู ุฏุงุฏู)** | ูุงูโูุง ูููโุดุฏู ููฺฉู ุงุณุช ฺฉูพ ูุดููุฏ. | ุงุณุชูุงุฏู ุงุฒ `lvm snapshot` ุง ุชููู ุณุฑูุณ ูุจู ุงุฒ ุจฺฉโุขูพ |
| **ูุญุฏูุฏุชโูุง ุณููู (quota)** | ุงฺฏุฑ ุณูููโุจูุฏ (quota) ูุนุงู ุจุงุดุฏุ ููฺฉู ุงุณุช ุจุง ุฎุทุง ูุถุง ุฐุฎุฑูโุณุงุฒ ููุงุฌู ุดูุฏ. | ุจุฑุฑุณ `quota` ุจุง `repquota` |

### **ุฏุณุชูุฑ rsync ุจููู ุจุฑุง ext4/btrfs:**
```bash
rsync -aAXvz --progress --numeric-ids \
"/home/sajad/All Project/" "/mnt/backup/All_Project_Backup/"
```
- `--numeric-ids` (ุจุฑุง ุญูุธ UID/GID ุจู ุฌุง ูุงู ฺฉุงุฑุจุฑ)

---

## **ด. ูุญุฏูุฏุชโูุง ุดุจฺฉู (NFS/Samba/SSH)**
ุงฺฏุฑ ููุตุฏ ุจฺฉโุขูพ ฺฉ ุณุฑูุฑ ุฑุงูโุฏูุฑ ุงุณุชุ ุจุงุฏ ุจู ูุญุฏูุฏุชโูุง ุดุจฺฉู ุชูุฌู ฺฉูุฏ:

### **ูุดฺฉูุงุช ุฑุงุฌ:**
| ูุดฺฉู | ุชูุถุญ | ุฑุงูฺฉุงุฑ |
|------|-------|--------|
| **ุงุชุตุงู ูุงูพุงุฏุงุฑ** | ูุทุน ุดุฏู ุดุจฺฉู ุจุงุนุซ ูููโุชูุงู ูุงูุฏู ุจฺฉโุขูพ ูโุดูุฏ. | ุงุณุชูุงุฏู ุงุฒ `--partial --timeout=300` |
| **ูุดฺฉู ุจุง ูุงูโูุง ุฏุงุฑุง hardlink** | ุจุฑุฎ ูพุฑูุชฺฉูโูุง ุดุจฺฉู (ูุซู Samba) ุงุฒ hardlink ูพุดุชุจุงู ููโฺฉููุฏ. | ุงุณุชูุงุฏู ุงุฒ `-H` ููุท ุฏุฑ ุตูุฑุช ูพุดุชุจุงู |
| **ูุญุฏูุฏุช ูพููุง ุจุงูุฏ** | ุงูุชูุงู ูุงูโูุง ุญุฌู ููฺฉู ุงุณุช ุดุจฺฉู ุฑุง ุงุดุจุงุน ฺฉูุฏ. | ุงุณุชูุงุฏู ุงุฒ `--bwlimit=5000` (ูุซูุงู ตฐฐฐKB/s) |

### **ุฏุณุชูุฑ rsync ุงูู ุจุฑุง ุดุจฺฉู:**
```bash
rsync -aAXvz --progress --partial --timeout=300 -e ssh \
"/home/sajad/All Project/" "user@remote:/backup/All_Project_Backup/"
```

---

## **ต. ูุงูโุณุณุชูโูุง ุฎุงุต (ZFS, LVM, Encrypted)**
| ูุงูโุณุณุชู | ูุดฺฉู | ุฑุงูฺฉุงุฑ |
|------------|------|--------|
| **ZFS** | snapshotูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุจุง rsync ุชุฏุงุฎู ุฏุงุดุชู ุจุงุดูุฏ. | ุงุณุชูุงุฏู ุงุฒ `zfs send/receive` ุจู ุฌุง rsync |
| **LVM** | ูุงูโุณุณุชูโูุง LVM ูุงุฒ ุจู snapshotฺฏุฑ ุฏุงุฑูุฏ. | ุงุฌุงุฏ LVM snapshot ูุจู ุงุฒ ุจฺฉโุขูพ |
| **Encrypted (LUKS)** | ุงฺฏุฑ ูพุงุฑุชุดู ุฑูุฒูฺฏุงุฑ ุดุฏู ุจุงุดุฏุ ุจุงุฏ ูุจู ุงุฒ rsync ุจุงุฒ ุดูุฏ. | ุงุณุชูุงุฏู ุงุฒ `cryptsetup open` |

---

## **ุฌูุนโุจูุฏ: ุจูุชุฑู ุฑูุด ุจุฑุง ูุฑ ูุงูโุณุณุชู**
| ูุงูโุณุณุชู | ฺฏุฒููโูุง rsync ูพุดููุงุฏ |
|------------|-------------------------|
| **NTFS** | `-rtv --no-perms --no-owner --modify-window=1` |
| **FAT32/exFAT** | `-rtv --no-perms --no-owner --max-size=4G` |
| **ext4/btrfs** | `-aAXvz --numeric-ids` |
| **ุดุจฺฉู (SSH/NFS)** | `-aAXvz --partial --timeout=300 -e ssh` |
| **ZFS/LVM** | ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ูุฎุตูุต (`zfs send`, `lvcreate --snapshot`) |

# ุงุทููุงู ุงุฒ ุตุญุช ุจฺฉ ุขูพ

ุจุฑุง ุงุทููุงู ุงุฒ ุตุญุช ู ุณูุงูุช ุจฺฉโุขูพ ฺฏุฑูุชูโุดุฏู ุจุง `rsync`ุ ูโุชูุงูุฏ ุงุฒ ุฑูุดโูุง ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

---

## **ฑ. ุจุฑุฑุณ ฺฉูพุงุฑฺฺฏ ุฏุงุฏูโูุง (Integrity Check)**
### **ุงูู) ููุงุณู ุญุฌู ู ุชุนุฏุงุฏ ูุงูโูุง**
```bash
# ูุญุงุณุจู ุญุฌู ูพูุดู ูุจุฏุง ู ููุตุฏ
du -sh "/home/sajad/All Project/"
du -sh "/mnt/backup/All_Project_Backup/"

# ุดูุงุฑุด ุชุนุฏุงุฏ ูุงูโูุง
find "/home/sajad/All Project/" -type f | wc -l
find "/mnt/backup/All_Project_Backup/" -type f | wc -l
```
- โ ุญุฌู ู ุชุนุฏุงุฏ ูุงูโูุง ุจุงุฏ **ฺฉุณุงู** ุจุงุดุฏ.

### **ุจ) ููุงุณู ูุญุชูุง ูุงูโูุง ุจุง `diff`**
```bash
diff -rq "/home/sajad/All Project/" "/mnt/backup/All_Project_Backup/"
```
- โ ุงฺฏุฑ ุฎุฑูุฌ ูุฏุงุดุชุ ุนู ูุงูโูุง **ฺฉุงููุงู ฺฉุณุงู** ูุณุชูุฏ.

### **ุฌ) ุจุฑุฑุณ ูุด ูุงูโูุง (Checksum)**
```bash
# ูุญุงุณุจู MD5 ูุด ุจุฑุง ูุงูโูุง ูุจุฏุง ู ููุตุฏ
find "/home/sajad/All Project/" -type f -exec md5sum {} + > /tmp/source.md5
find "/mnt/backup/All_Project_Backup/" -type f -exec md5sum {} + > /tmp/backup.md5

# ููุงุณู ูุดโูุง
diff /tmp/source.md5 /tmp/backup.md5
```
- โ ุนุฏู ูุฌูุฏ ุชูุงูุช ุจู ูุนูุง ุณูุงูุช ุจฺฉโุขูพ ุงุณุช.

---

## **ฒ. ุจุฑุฑุณ ุณุงุฎุชุงุฑ ูุงูโูุง**
### **ุงูู) ุงุทููุงู ุงุฒ ุญูุธ ูุฌูุฒูุง (Permissions)**
```bash
ls -l "/home/sajad/All Project/sample_file"
ls -l "/mnt/backup/All_Project_Backup/sample_file"
```
- โ ูุฌูุฒูุง (ูุซูุงู `-rw-r--r--`) ุจุงุฏ ฺฉุณุงู ุจุงุดูุฏ.

### **ุจ) ุจุฑุฑุณ Extended Attributes (ุงฺฏุฑ ุงุณุชูุงุฏู ุดุฏู)**
```bash
getfattr -d "/home/sajad/All Project/sample_file"
getfattr -d "/mnt/backup/All_Project_Backup/sample_file"
```
- โ ุจุฑุง ูุงูโุณุณุชูโูุง ุบุฑ-NTFSุ ุจุงุฏ ููุงุฏุฑ ฺฉุณุงู ุจุงุดูุฏ.

---

## **ณ. ุชุณุช ุจุงุฒุงุจ (Recovery Test)**
### **ุงูู) ุจุงุฒุงุจ ฺฉ ูุงู ููููู**
```bash
# ฺฉูพ ฺฉ ูุงู ุงุฒ ุจฺฉโุขูพ ุจู ูุญู ูููุช
cp "/mnt/backup/All_Project_Backup/sample_file" /tmp/

# ุจุฑุฑุณ ุนููฺฉุฑุฏ ูุงู
file /tmp/sample_file
```
- โ ูุงู ุจุงุฏ ุจุฏูู ุฎุทุง ุจุงุฒ ุดูุฏ (ูุซูุงู ุชุตูุฑุ PDF ุง ฺฉุฏ ุงุฌุฑุง).

### **ุจ) ุจุงุฒุงุจ ฺฉุงูู ุจู ฺฉ ูุณุฑ ุชุณุช**
```bash
mkdir -p /tmp/test_restore
rsync -a "/mnt/backup/All_Project_Backup/" "/tmp/test_restore/"
```
- โ ุณุณุชู ุจุงุฏ ุจุชูุงูุฏ ุชูุงู ูุงูโูุง ุฑุง ุจุงุฒุงุจ ฺฉูุฏ.

---

## **ด. ุจุฑุฑุณ ุฎุทุงูุง ูพููุงู**
### **ุงูู) ุงุณฺฉู ูุงฺฏ rsync**
```bash
grep -i "error\|fail\|warning" ~/.cache/rsync.log
```
- โ ุนุฏู ูุฌูุฏ ุฎุทุงูุง ุจุญุฑุงู.

### **ุจ) ุจุฑุฑุณ ูุถุง ุงุดุบุงูโุดุฏู**
```bash
df -h /mnt/backup/
```
- โ ูุถุง ุงุณุชูุงุฏูโุดุฏู ุจุงุฏ ุจุง ุญุฌู ูุจุฏุง ููุทุจู ุจุงุดุฏ.

---

## **ต. ุงุจุฒุงุฑูุง ฺฉูฺฉ**
### **ุงูู) ุงุณุชูุงุฏู ุงุฒ `rsync --checksum`**
ุจุฑุง ุงุทููุงู ุงุฒ ุชุทุงุจู ูุญุชูุง ูุงูโูุง (ุจุฏูู ุชูุฌู ุจู timestamp):
```bash
rsync -avc --dry-run "/home/sajad/All Project/" "/mnt/backup/All_Project_Backup/"
```
- โ ุงฺฏุฑ ุฎุฑูุฌ ูุฏุงุดุชุ ูุงูโูุง ฺฉุณุงู ูุณุชูุฏ.

### **ุจ) ุงุจุฒุงุฑ `rclone check` (ุจุฑุง ุจฺฉโุขูพโูุง ุงุจุฑ)**
```bash
rclone check "/home/sajad/All Project/" "/mnt/backup/All_Project_Backup/"
```

---

## **ุฌูุนโุจูุฏ: ฺฺฉโูุณุช ุณูุงูุช ุจฺฉโุขูพ**
| ุงูุฏุงู | ุฏุณุชูุฑ/ุฑูุด | ูุนุงุฑ ููููุช |
|-------|-----------|--------------|
| **ููุงุณู ุญุฌู** | `du -sh` | ุญุฌู ูุจุฏุง ู ููุตุฏ ฺฉุณุงู ุจุงุดุฏ |
| **ููุงุณู ุชุนุฏุงุฏ ูุงูโูุง** | `find | wc -l` | ุชุนุฏุงุฏ ูุงูโูุง ุจุฑุงุจุฑ ุจุงุดุฏ |
| **ููุงุณู ูุญุชูุง** | `diff -rq` | ุจุฏูู ุชูุงูุช ุจุงุดุฏ |
| **ุจุฑุฑุณ ูุฌูุฒูุง** | `ls -l` | ูุฌูุฒูุง ฺฉุณุงู ุจุงุดูุฏ |
| **ุชุณุช ุจุงุฒุงุจ** | `cp + file` | ูุงูโูุง ูุงุจู ุงุณุชูุงุฏู ุจุงุดูุฏ |
| **ุจุฑุฑุณ ุฎุทุงูุง** | `grep error` | ูฺ ุฎุทุง ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ |

ุงฺฏุฑ ุชูุงู ูุฑุงุญู ุจุงูุง ุฑุง ุจุง ููููุช ฺฏุฐุฑุงูุฏุฏุ ุจฺฉโุขูพ ุดูุง **ุณุงูู ู ูุงุจู ุงุนุชูุงุฏ** ุงุณุช! ๐